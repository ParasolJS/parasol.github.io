{"version":3,"file":"parasol.js","sources":["../src/api/init.js","../src/util/as_float.js","../src/api/attachGrid.js","../src/api/gridUpdate.js","../src/api/sync.js","../src/api/linked.js","../src/util/wrangle.js","../src/util/arr_stats.js","../src/util/standardize.js","../src/util/format_data.js","../src/util/add_column.js","../src/api/cluster.js","../src/util/normalize.js","../src/api/weightedSums.js","../src/api/hideAxes.js","../src/api/showAxes.js","../src/api/setAxesLayout.js","../src/api/keepData.js","../src/api/removeData.js","../node_modules/file-saver/FileSaver.js","../src/api/exportData.js","../src/api/resetSelections.js","../src/wrap/alpha.js","../src/wrap/color.js","../src/wrap/alphaOnBrushed.js","../src/wrap/brushedColor.js","../src/wrap/reorderable.js","../src/wrap/composite.js","../src/wrap/shadows.js","../src/wrap/dimensions.js","../src/wrap/flipAxes.js","../src/wrap/scale.js","../src/wrap/bundleDimension.js","../src/wrap/bundlingStrength.js","../src/wrap/smoothness.js","../src/wrap/render.js","../src/wrap/brushReset.js","../src/wrap/unmark.js","../src/wrap/unhighlight.js","../src/state/defaultConfig.js","../src/state/initState.js","../src/index.js"],"sourcesContent":["import { selectAll } from 'd3';\r\nimport ParCoords from 'parcoord-es';\r\n\r\n/**\r\n * Setup a new visualization.\r\n *\r\n * @param config\r\n * @returns {ps} a parasol closure\r\n */\r\nconst init = config => {\r\n  /**\r\n   * Create a visualization within a container. The selector can also be a d3 selection.\r\n   *\r\n   * @param selection a d3 selection\r\n   * @returns {ps} instance for chained api, compatible with parcoords api\r\n   */\r\n  const ps = function(selection) {\r\n    selection = ps.selection = selectAll(selection);\r\n\r\n    // store pc charts in array\r\n    ps.charts = [];\r\n    selection.each(function(d, i) {\r\n      ps.charts[i] = ParCoords(config.chartOptions)(this)\r\n        .data(config.data)\r\n        .hideAxis(['id'])\r\n        .alpha(0.4)\r\n        .render()\r\n        .mode('queue')\r\n        .brushMode('1D-axes'); //1D-axes must be used with linking\r\n\r\n      // add \"id\" to partition globally\r\n      config.partition[i] = ['id'];\r\n    });\r\n\r\n    // for chained api\r\n    return ps;\r\n  };\r\n  // for partial-application style programming\r\n  return ps;\r\n};\r\n\r\nexport default init;\r\n","const as_float = x => {\r\n  const converted = parseFloat(x);\r\n  return isNaN(converted) ? x : converted;\r\n};\r\n\r\nexport default as_float;\r\n","import SlickGrid from 'slickgrid-es6';\r\nimport { difference } from 'lodash-es';\r\n\r\nimport as_float from '../util/as_float';\r\n\r\n/**\r\n * Creates a new instance of the grid.\r\n * @class SlickGrid\r\n * @constructor\r\n * @param {string} container:   DOM element in which grid will be placed.\r\n * @param {array}  columns:    An array of column definitions (objects).\r\n * @param {object} options:     SlickGrid options.\r\n **/\r\nconst attachGrid = (config, ps, flags) =>\r\n  function({ container, columns = null, options = null }) {\r\n    flags.grid = true;\r\n\r\n    const checkboxSelector = new SlickGrid.Plugins.CheckboxSelectColumn({\r\n      cssClass: 'slick-cell-checkboxsel',\r\n    });\r\n\r\n    if (columns === null) {\r\n      // place id col on left\r\n      let column_keys = config.vars;\r\n      column_keys = difference(column_keys, ['id']);\r\n      // NOTE: remove line below to remove id col from grid\r\n      column_keys.unshift('id');\r\n\r\n      columns = column_keys.map((key, i) => ({\r\n        id: key,\r\n        name: key,\r\n        field: key,\r\n        sortable: true,\r\n      }));\r\n      columns.unshift(checkboxSelector.getColumnDefinition());\r\n    }\r\n\r\n    if (options === null) {\r\n      options = {\r\n        enableCellNavigation: true,\r\n        enableColumnReorder: true,\r\n        multiColumnSort: false,\r\n        editable: true,\r\n        asyncEditorLoading: false,\r\n        autoEdit: false,\r\n      };\r\n    }\r\n\r\n    // initialize\r\n    config.dataView = new SlickGrid.Data.DataView();\r\n    config.dataView.setItems(config.data);\r\n    config.grid = new SlickGrid.Grid(\r\n      container,\r\n      config.dataView,\r\n      columns,\r\n      options\r\n    );\r\n\r\n    config.grid.setSelectionModel(\r\n      new SlickGrid.Plugins.RowSelectionModel({ selectActiveRow: false })\r\n    );\r\n    config.grid.registerPlugin(checkboxSelector);\r\n\r\n    // wire up model events to drive the grid\r\n    config.dataView.onRowCountChanged.subscribe((e, args) => {\r\n      config.grid.updateRowCount();\r\n      config.grid.render();\r\n    });\r\n\r\n    config.dataView.onRowsChanged.subscribe((e, args) => {\r\n      config.grid.invalidateRows(args.rows);\r\n      config.grid.render();\r\n    });\r\n\r\n    // keep checkboxes matched with row on update\r\n    config.dataView.syncGridSelection(config.grid);\r\n\r\n    // column sorting\r\n    let sortcol = columns.map(c => c.name);\r\n    sortcol.shift();\r\n    let sortdir = 1;\r\n\r\n    const comparer = (a, b) => {\r\n      const x = as_float(a[sortcol]);\r\n      const y = as_float(b[sortcol]);\r\n      return x == y ? 0 : x > y ? 1 : -1;\r\n    };\r\n\r\n    // click header to sort grid column\r\n    config.grid.onSort.subscribe((e, args) => {\r\n      sortdir = args.sortAsc ? 1 : -1;\r\n      sortcol = args.sortCol.field;\r\n\r\n      config.dataView.sort(comparer, args.sortAsc);\r\n    });\r\n\r\n    return this;\r\n  };\r\n\r\nexport default attachGrid;\r\n","import { union } from 'lodash-es';\r\nimport as_float from '../util/as_float';\r\n\r\n/**\r\n * Update data displayed in grid.\r\n * @param {array}  data:    array of objects.\r\n * @param {array} columns:  column definitions.\r\n **/\r\nconst gridUpdate = (config, ps, flags) =>\r\n  function({ data = null, columns = null } = {}) {\r\n    if (columns !== null) {\r\n      config.grid.setColumns(columns);\r\n      config.grid.render();\r\n    }\r\n    if (data === null) {\r\n      data = config.selections();\r\n      if (data.length === 0) {\r\n        // if selections empty, use full dataset\r\n        data = config.data;\r\n      }\r\n    }\r\n    // if marked data exists, keep in grid\r\n    if (config.marked.length) {\r\n      data = union(data, config.marked);\r\n    }\r\n\r\n    const comparer = (a, b) => {\r\n      const x = as_float(a['id']);\r\n      const y = as_float(b['id']);\r\n      return x == y ? 0 : x > y ? 1 : -1;\r\n    };\r\n\r\n    config.dataView.beginUpdate();\r\n    config.dataView.setItems(data);\r\n    config.dataView.sort(comparer, true);\r\n    config.dataView.endUpdate();\r\n\r\n    return this;\r\n  };\r\n\r\nexport default gridUpdate;\r\n","import { union, intersection } from 'lodash-es';\r\n\r\n// synchronize data between linked components\r\nconst sync = (config, ps, flags) =>\r\n  function() {\r\n    //obtain array of brushed data for each chart\r\n    const brush_extents = [];\r\n    ps.linked.forEach(pc => {\r\n      brush_extents.push(pc.selected());\r\n    });\r\n\r\n    //check edge case where all brushes individually clicked away\r\n    if (union(...brush_extents).length == 0) {\r\n      ps.linked.forEach(pc => {\r\n        pc.brushReset();\r\n      });\r\n      config.brushed = [];\r\n      // update data in grid\r\n      if (flags.grid) {\r\n        ps.gridUpdate(config.data);\r\n      }\r\n    } else {\r\n      const brushed = intersection(...brush_extents);\r\n      ps.linked.forEach(pc => {\r\n        pc.brushed(brushed).render();\r\n      });\r\n\r\n      // NOTE: once pc.selected issue fixed, remove if statement and uncomment line below\r\n      //config.brushed = brushed;\r\n      if (brushed.length < config.data.length) {\r\n        config.brushed = brushed;\r\n      } else {\r\n        config.brushed = [];\r\n      }\r\n      // update data in grid\r\n      // NOTE: once pc.selected fixed, remove arg from gridUpdate\r\n      if (flags.grid) {\r\n        ps.gridUpdate({ data: brushed });\r\n      }\r\n    }\r\n  };\r\n\r\nexport default sync;\r\n","import sync from './sync';\r\n\r\n/**\r\n * Link brush activity between specified charts, and grid if it exists.\r\n *\r\n * @param {array} chartIDs:   charts to be linked (defaults to all).\r\n **/\r\nconst linked = (config, ps, flags) =>\r\n  function(chartIDs = [...Array(ps.charts.length).keys()]) {\r\n    // force numeric type for indexing\r\n    chartIDs = chartIDs.map(Number);\r\n\r\n    // setup linked components\r\n    ps.linked = [];\r\n    chartIDs.forEach((i, j) => {\r\n      ps.linked[j] = ps.charts[i];\r\n    });\r\n\r\n    ps.linked.forEach(pc => {\r\n      pc.on('brush', sync(config, ps, flags));\r\n    });\r\n\r\n    // connect grid\r\n    if (flags.grid) {\r\n      // highlight row in chart\r\n      config.grid.onMouseEnter.subscribe((e, args) => {\r\n        let i = config.grid.getCellFromEvent(e).row;\r\n        const d = config.dataView.getItems() || config.data;\r\n        ps.linked.forEach(pc => {\r\n          pc.highlight([d[i]]);\r\n        });\r\n      });\r\n      config.grid.onMouseLeave.subscribe((e, args) => {\r\n        ps.linked.forEach(pc => {\r\n          pc.unhighlight();\r\n        });\r\n      });\r\n\r\n      // mark row in chart\r\n      config.grid.onSelectedRowsChanged.subscribe((e, args) => {\r\n        // reset and update selected rows\r\n        const selected_row_ids = config.grid.getSelectedRows();\r\n        const d = config.dataView.getItems() || config.data;\r\n        ps.linked.forEach(pc => {\r\n          pc.unmark();\r\n        });\r\n        selected_row_ids.forEach(i => {\r\n          ps.linked.forEach(pc => {\r\n            pc.mark([d[i]]);\r\n          });\r\n        });\r\n\r\n        // update marked data\r\n        config.marked = ps.linked[0].marked();\r\n\r\n        // refresh grid if brushes are applied\r\n        if (config.brushed.length) {\r\n          ps.gridUpdate();\r\n        }\r\n      });\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\nexport default linked;\r\n","// wrangling tools to manipulate data for processing values\r\n\r\n// d3 data is formatted as array of objects, each row is an object\r\n// convert to object of arrays, each array is a column\r\n// e.g. {\"var1\": [col1], \"var2\": [col2]}\r\nconst array_to_object = data =>\r\n  data.reduce((acc, obj) => {\r\n    Object.keys(obj).forEach(function(k) {\r\n      acc[k] = (acc[k] || []).concat(Number(obj[k]));\r\n    });\r\n    return acc;\r\n  }, {});\r\n\r\n// data is formatted as 'data frame' with columns as keys\r\n// convert back to array of objects with rows as objects\r\nconst object_to_array = (df, data) => {\r\n  var result = [];\r\n  Object.entries(df).forEach(([key, values]) => {\r\n    values.forEach((val, i) => {\r\n      result[i] = result[i] || {};\r\n      // get original string if value is NaN\r\n      if (isNaN(val)) {\r\n        result[i][key] = data[i][key];\r\n      } else {\r\n        result[i][key] = val.toString();\r\n      }\r\n    });\r\n  });\r\n  return result;\r\n};\r\n\r\nexport { array_to_object, object_to_array };\r\n","// inspired by: https://gist.github.com/Daniel-Hug/7273430\r\nconst arr = {\r\n  max: function(array) {\r\n    return Math.max.apply(null, array);\r\n  },\r\n\r\n  min: function(array) {\r\n    return Math.min.apply(null, array);\r\n  },\r\n\r\n  range: function(array) {\r\n    return arr.max(array) - arr.min(array);\r\n  },\r\n\r\n  extents: function(array) {\r\n    return [arr.min(array), arr.max(array)];\r\n  },\r\n\r\n  sum: function(array) {\r\n    let num = 0;\r\n    for (let i = 0, l = array.length; i < l; i++) num += array[i];\r\n    return num;\r\n  },\r\n\r\n  mean: function(array) {\r\n    return arr.sum(array) / array.length;\r\n  },\r\n\r\n  variance: function(array) {\r\n    const mean = arr.mean(array);\r\n    return arr.mean(\r\n      array.map(function(num) {\r\n        return Math.pow(num - mean, 2);\r\n      })\r\n    );\r\n  },\r\n\r\n  standardDeviation: function(array) {\r\n    return Math.sqrt(arr.variance(array));\r\n  },\r\n\r\n  zScores: function(array) {\r\n    const mean = arr.mean(array);\r\n    const standardDeviation = arr.standardDeviation(array);\r\n    return array.map(function(num) {\r\n      return (num - mean) / standardDeviation;\r\n    });\r\n  },\r\n\r\n  norms: function(array) {\r\n    const extents = arr.extents(array);\r\n    return array.map(function(num) {\r\n      return (num - extents[0]) / (extents[1] - extents[0]);\r\n    });\r\n  },\r\n};\r\n\r\nexport default arr;\r\n","import { array_to_object, object_to_array } from './wrangle';\r\nimport arr from './arr_stats';\r\n\r\n// convert values to zscores\r\nconst standardize = data => {\r\n  // reformat data\r\n  const df = array_to_object(data);\r\n\r\n  // standardize values\r\n  Object.keys(df).forEach(key => {\r\n    df[key] = arr.zScores(df[key]);\r\n  });\r\n\r\n  // convert back to original data type\r\n  return object_to_array(df, data);\r\n};\r\n\r\nexport default standardize;\r\n","// format data values as strings\r\n// const parcoords_format = d => {\r\n// \td.forEach(\r\n// \t\t(d_obj) => {\r\n// \t\t\tObject.entries(d_obj).forEach(\r\n// \t\t\t\t([key, value]) =>  {\r\n// \t\t\t\t\td_obj[key] = value.toString();\r\n// \t\t\t\t});\r\n// \t\t});\r\n// };\r\nimport { csvFormat, csvParse } from 'd3-dsv';\r\n\r\nconst format_data = data => csvParse(csvFormat(data));\r\n\r\nexport default format_data;\r\n","import { includes } from 'lodash-es';\r\n// add column defintion to grid columns\r\nconst add_column = (columns, col_name) => {\r\n  // ignore repeats\r\n  const names = columns.map(col => col.name);\r\n  if (includes(names, col_name)) {\r\n    return columns;\r\n  } else {\r\n    const col_def = {\r\n      id: col_name,\r\n      name: col_name,\r\n      field: col_name,\r\n      sortable: true,\r\n    };\r\n    columns.push(col_def);\r\n    return columns;\r\n  }\r\n};\r\nexport default add_column;\r\n","import kmeans from 'ml-kmeans';\r\nimport { scaleOrdinal, schemeCategory10 } from 'd3';\r\n\r\nimport standardize from '../util/standardize';\r\nimport format_data from '../util/format_data';\r\nimport add_column from '../util/add_column';\r\n\r\n/**\r\n * Partition data into k clusters in which each data element belongs to\r\n * the cluster with the nearest mean.\r\n *\r\n * @param {int} k: number of clusters\r\n * @param {array} displayIDs: charts that will display cluster colors\r\n * @param {} palette: d3 palette or function mapping cluster ids to color\r\n * @param {array} vars: variables used for clustering. NOTE: associated data must be numeric\r\n * @param {object} options: ml-kmeans options\r\n * @param {bool} std: convert values to zscores to obtain unbiased clusters\r\n * @param {bool} hidden: determines whether cluster axis will be displayed on charts (can be individually updated with hideAxis later)\r\n */\r\nconst cluster = (config, ps, flags) =>\r\n  function({\r\n    k = 3,\r\n    vars = config.vars,\r\n    displayIDs = [...Array(ps.charts.length).keys()],\r\n    palette = schemeCategory10,\r\n    options = {},\r\n    std = true,\r\n    hidden = true,\r\n  } = {}) {\r\n    if (Array.isArray(palette)) {\r\n      const scheme = scaleOrdinal(palette);\r\n      palette = d => scheme(Number(d['cluster']));\r\n    } else {\r\n      palette = palette;\r\n    }\r\n\r\n    let data = [];\r\n    if (std === true) {\r\n      data = standardize(config.data);\r\n    } else {\r\n      data = config.data;\r\n    }\r\n\r\n    // setup object to filter variables that will be used in clustering\r\n    const cluster_vars = {};\r\n    vars.forEach(v => {\r\n      cluster_vars[v] = true;\r\n    });\r\n\r\n    // get data values in array of arrays for clustering\r\n    // (values from each row object captured in array)\r\n    const values = [];\r\n    data.forEach(d => {\r\n      const target = [];\r\n      Object.entries(d).forEach(([key, value]) => {\r\n        // only take values from variables listed in function argument\r\n        if (cluster_vars[key] == true) {\r\n          target.push(Number(value));\r\n        }\r\n      });\r\n      values.push(target);\r\n    });\r\n\r\n    // preform clustering and update config data\r\n    const result = kmeans(values, k, options);\r\n    config.data.forEach((d, i) => {\r\n      d.cluster = result.clusters[i].toString();\r\n    });\r\n    // console.log('kmeans++');\r\n    // console.log(result.iterations, result.centroids.map(c => c.error));\r\n    // console.log(result.centroids);\r\n\r\n    // hide cluster axis and show colors by default\r\n    if (hidden == true) {\r\n      Object.keys(config.partition).forEach(id => {\r\n        config.partition[id].push('cluster');\r\n      });\r\n    }\r\n\r\n    // format data, update charts\r\n    config.vars.push('cluster');\r\n    config.data = format_data(config.data);\r\n    ps.charts.forEach(pc => {\r\n      pc.data(config.data)\r\n        .render()\r\n        .createAxes();\r\n      // .updateAxes();\r\n    });\r\n\r\n    ps.charts.forEach((pc, i) => {\r\n      // only color charts in displayIDs\r\n      if (displayIDs.includes(i)) {\r\n        pc.color(palette);\r\n      }\r\n      pc.hideAxis(config.partition[i])\r\n        .render()\r\n        .updateAxes(0);\r\n    });\r\n\r\n    if (flags.grid) {\r\n      // add column\r\n      const cols = add_column(config.grid.getColumns(), 'cluster');\r\n      ps.gridUpdate({ columns: cols });\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\nexport default cluster;\r\n","import { array_to_object, object_to_array } from './wrangle';\r\nimport arr from './arr_stats';\r\n\r\n// normalize data values (scale: 0-1) for unbiased aggregate scores\r\nconst normalize = data => {\r\n  // reformat data\r\n  const df = array_to_object(data);\r\n\r\n  // normalize values\r\n  Object.entries(df).forEach(([key, col]) => {\r\n    df[key] = arr.norms(col);\r\n  });\r\n\r\n  // convert back to original data type\r\n  return object_to_array(df, data);\r\n};\r\n\r\nexport default normalize;\r\n","import normalize from '../util/normalize';\r\nimport format_data from '../util/format_data';\r\nimport arr from '../util/arr_stats';\r\nimport add_column from '../util/add_column';\r\n\r\n/**\r\n * Compute individual weighted sums for each solution based on\r\n * user specified weights.\r\n *\r\n * @param {object} weights: specify weight of each variable, unspecified variables will be assigned weight 0\r\n * @param {array} displayIDs: charts that will display 'weighted sum' variable; defaults to all charts\r\n * @param {bool} norm: normalize values (0-1) to obtain fair weighting\r\n */\r\nconst weightedSums = (config, ps, flags) =>\r\n  function({\r\n    weights,\r\n    displayIDs = [...Array(ps.charts.length).keys()],\r\n    norm = true,\r\n  }) {\r\n    // NOTE: if data is re-scored, old score will not affect new score unless it is given a weight itself in the 'weights' object\r\n\r\n    // force numeric type for indexing\r\n    displayIDs = displayIDs.map(Number);\r\n\r\n    let data = [];\r\n    if (norm === true) {\r\n      data = normalize(config.data);\r\n    } else {\r\n      data = config.data;\r\n    }\r\n\r\n    // compute initial weight for each data element\r\n    const row_totals = [];\r\n    data.forEach((d, i) => {\r\n      let d_weight = 0;\r\n      Object.entries(d).forEach(\r\n        // find cumulative sum of weight times value\r\n        ([key, val]) => {\r\n          if (weights[key]) {\r\n            d_weight += val * weights[key];\r\n          }\r\n        }\r\n      );\r\n      data[i].score = d_weight;\r\n      row_totals.push(d_weight);\r\n    });\r\n\r\n    // normalize all values against total weight and assign values\r\n    const extents = arr.extents(row_totals);\r\n    data.forEach((d, i) => {\r\n      config.data[i]['weighted sum'] = (\r\n        (d.score - extents[0]) /\r\n        (extents[1] - extents[0])\r\n      ).toString();\r\n    });\r\n\r\n    // partition scores var on charts\r\n    Object.keys(config.partition).forEach(i => {\r\n      if (!displayIDs.includes(Number(i))) {\r\n        // chart not in displayIDs, hidden on this chart\r\n        config.partition[Number(i)].push('weighted sum');\r\n      }\r\n    });\r\n\r\n    // weighted sums are ready, update data and charts\r\n    config.vars.push('weighted sum');\r\n    console.log(config.vars);\r\n    config.data = format_data(config.data);\r\n    ps.charts.forEach((pc, i) => {\r\n      pc.data(config.data)\r\n        .hideAxis(config.partition[i])\r\n        .render()\r\n        .createAxes();\r\n      // .updateAxes();\r\n    });\r\n    // NOTE: need to maintain current state of charts somehow\r\n\r\n    if (flags.grid) {\r\n      // add column\r\n      const cols = add_column(config.grid.getColumns(), 'weighted sum');\r\n      ps.gridUpdate({ columns: cols });\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\nexport default weightedSums;\r\n","import { isPlainObject, union } from 'lodash-es';\r\n\r\n/**\r\n * Hide a set of axes globally or from specific charts.\r\n *\r\n * @param partition: array or object idenifying axes to be hidden; if object, format as { chart id: [hidden vars]}\r\n */\r\nconst hideAxes = (config, ps, flags) =>\r\n  function(partition) {\r\n    if (Array.isArray(partition)) {\r\n      // append array to every key in config.partition\r\n      Object.keys(config.partition).forEach(function(id) {\r\n        config.partition[id] = union(config.partition[id], partition);\r\n      });\r\n    } else if (isPlainObject(partition)) {\r\n      // take union of values for each key that is also in config.partition\r\n      Object.entries(partition).forEach(([key, values]) => {\r\n        if (config.partition[key]) {\r\n          config.partition[key] = union(config.partition[key], partition[key]);\r\n        }\r\n      });\r\n    } else {\r\n      throw 'Error: please provide an object or array as argument.';\r\n    }\r\n\r\n    // iterate over partition keys and hide all variables in value array\r\n    Object.entries(config.partition).forEach(([chartID, vars]) => {\r\n      ps.charts[chartID].hideAxis(vars);\r\n      ps.charts[chartID].render().updateAxes(500);\r\n    });\r\n\r\n    return this;\r\n  };\r\n\r\nexport default hideAxes;\r\n","import { isPlainObject, difference } from 'lodash-es';\r\n\r\n/**\r\n * Show a set of axes globally or on specific charts\r\n *\r\n * @param partition: array or object idenifying axes to be shown; if object, format as { chart id: [vars to show]}\r\n */\r\nconst showAxes = (config, ps, flags) =>\r\n  function(partition) {\r\n    if (typeof partition === 'undefined') {\r\n      // show all axes on all charts (empty partition)\r\n      Object.keys(config.partition).forEach(function(id) {\r\n        config.partition[id] = [];\r\n      });\r\n    } else if (Array.isArray(partition)) {\r\n      // remove array from every key in config.partition\r\n      Object.keys(config.partition).forEach(function(id) {\r\n        config.partition[id] = difference(config.partition[id], partition);\r\n      });\r\n    } else if (isPlainObject(partition)) {\r\n      // take difference of values for each key that is also in config.partition\r\n      // (i.e. remove from hidden)\r\n      Object.entries(partition).forEach(([key, values]) => {\r\n        if (config.partition[key]) {\r\n          config.partition[key] = difference(\r\n            config.partition[key],\r\n            partition[key]\r\n          );\r\n        }\r\n      });\r\n    } else {\r\n      throw 'Error: please provide an object or array as argument.';\r\n    }\r\n\r\n    // iterate over partition keys and hide only remaining variables in value array\r\n    Object.entries(config.partition).forEach(([chartID, vars]) => {\r\n      ps.charts[chartID].hideAxis(vars);\r\n      ps.charts[chartID].render().updateAxes(500);\r\n    });\r\n\r\n    return this;\r\n  };\r\n\r\nexport default showAxes;\r\n","import { isPlainObject, difference } from 'lodash-es';\r\n\r\n/**\r\n * Specify the axes that will appear in each chart. Default for unspecified charts is to display all axes.\r\n *\r\n * @param {object} layout:  indentify a list of axes to be shown on each chart; format as { chart id: [vars to show]}\r\n */\r\nconst setAxesLayout = (config, ps, flags) =>\r\n  function(layout) {\r\n    if (isPlainObject(layout)) {\r\n      // take difference of all variables and layout variables\r\n      // i.e. show only those which appear in both data and layout\r\n      Object.entries(layout).forEach(([key, values]) => {\r\n        if (config.partition[key]) {\r\n          config.partition[key] = difference(\r\n            config.vars.concat('id'),\r\n            layout[key]\r\n          );\r\n        }\r\n      });\r\n    } else {\r\n      throw 'Error: please provide layout as a plain object.';\r\n    }\r\n\r\n    // iterate over partition keys and hide only remaining variables in value array\r\n    Object.entries(config.partition).forEach(([chartID, vars]) => {\r\n      ps.charts[chartID].hideAxis(vars);\r\n      ps.charts[chartID].render().updateAxes(0);\r\n    });\r\n\r\n    return this;\r\n  };\r\n\r\nexport default setAxesLayout;\r\n","/**\r\n * Keep only selected data update components\r\n *\r\n * @param data: One of {'brushed', 'marked', 'both'} keywords as string\r\n *\r\n * NOTE: Any existing brushes or marks will be overwritten\r\n */\r\nconst keepData = (config, ps, flags) =>\r\n  function(data) {\r\n    console.log('before:', config.data.length);\r\n\r\n    // identify data\r\n    let d = [];\r\n    if (data == 'brushed') {\r\n      d = config.brushed;\r\n    } else if (data == 'marked') {\r\n      d = config.marked;\r\n    } else if (data == 'both') {\r\n      d = config.selections();\r\n    } else {\r\n      throw \"Please specify one of {'brushed', 'marked', 'both'}\";\r\n    }\r\n    console.log(d);\r\n\r\n    if (d.length > 0) {\r\n      // reset selections and update config\r\n      ps.resetSelections('both');\r\n\r\n      // update data, charts, and grid\r\n      config.data = d;\r\n      ps.charts.forEach(pc => {\r\n        pc.data(d).render.default();\r\n        pc.brushReset();\r\n      });\r\n      if (flags.grid) {\r\n        ps.gridUpdate();\r\n      }\r\n    } else {\r\n      throw 'Error: No data selected.';\r\n    }\r\n\r\n    console.log('after:', config.data.length);\r\n    return this;\r\n  };\r\n\r\nexport default keepData;\r\n","import { difference } from 'lodash-es';\r\n\r\n/**\r\n * Remove selected data and components\r\n *\r\n * @param data: One of {'brushed', 'marked', 'both'} keywords as string\r\n *\r\n * NOTE: Any existing brushes or marks will be overwritten\r\n */\r\nconst removeData = (config, ps, flags) =>\r\n  function(data) {\r\n    console.log('before:', config.data.length);\r\n\r\n    // identify data\r\n    let d = [];\r\n    if (data == 'brushed') {\r\n      d = config.brushed;\r\n    } else if (data == 'marked') {\r\n      d = config.marked;\r\n    } else if (data == 'both') {\r\n      d = config.selections();\r\n    } else {\r\n      throw \"Please specify one of {'brushed', 'marked', 'both'}\";\r\n    }\r\n    d = difference(config.data, d);\r\n    console.log(d);\r\n\r\n    if (d.length > 0 && d.length < config.data.length) {\r\n      // reset selections and update config\r\n      ps.resetSelections('both');\r\n\r\n      // update data, charts, and grid\r\n      config.data = d;\r\n      ps.charts.forEach(pc => {\r\n        pc.data(d).render.default();\r\n        pc.brushReset();\r\n      });\r\n      if (flags.grid) {\r\n        ps.gridUpdate();\r\n      }\r\n    } else {\r\n      throw 'Error: No data selected.';\r\n    }\r\n\r\n    console.log('after:', config.data.length);\r\n    return this;\r\n  };\r\n\r\nexport default removeData;\r\n","/* FileSaver.js\n * A saveAs() FileSaver implementation.\n * 1.3.2\n * 2016-06-16 18:25:19\n *\n * By Eli Grey, http://eligrey.com\n * License: MIT\n *   See https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md\n */\n\n/*global self */\n/*jslint bitwise: true, indent: 4, laxbreak: true, laxcomma: true, smarttabs: true, plusplus: true */\n\n/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */\n\nvar saveAs = saveAs || (function(view) {\n\t\"use strict\";\n\t// IE <10 is explicitly unsupported\n\tif (typeof view === \"undefined\" || typeof navigator !== \"undefined\" && /MSIE [1-9]\\./.test(navigator.userAgent)) {\n\t\treturn;\n\t}\n\tvar\n\t\t  doc = view.document\n\t\t  // only get URL when necessary in case Blob.js hasn't overridden it yet\n\t\t, get_URL = function() {\n\t\t\treturn view.URL || view.webkitURL || view;\n\t\t}\n\t\t, save_link = doc.createElementNS(\"http://www.w3.org/1999/xhtml\", \"a\")\n\t\t, can_use_save_link = \"download\" in save_link\n\t\t, click = function(node) {\n\t\t\tvar event = new MouseEvent(\"click\");\n\t\t\tnode.dispatchEvent(event);\n\t\t}\n\t\t, is_safari = /constructor/i.test(view.HTMLElement) || view.safari\n\t\t, is_chrome_ios =/CriOS\\/[\\d]+/.test(navigator.userAgent)\n\t\t, throw_outside = function(ex) {\n\t\t\t(view.setImmediate || view.setTimeout)(function() {\n\t\t\t\tthrow ex;\n\t\t\t}, 0);\n\t\t}\n\t\t, force_saveable_type = \"application/octet-stream\"\n\t\t// the Blob API is fundamentally broken as there is no \"downloadfinished\" event to subscribe to\n\t\t, arbitrary_revoke_timeout = 1000 * 40 // in ms\n\t\t, revoke = function(file) {\n\t\t\tvar revoker = function() {\n\t\t\t\tif (typeof file === \"string\") { // file is an object URL\n\t\t\t\t\tget_URL().revokeObjectURL(file);\n\t\t\t\t} else { // file is a File\n\t\t\t\t\tfile.remove();\n\t\t\t\t}\n\t\t\t};\n\t\t\tsetTimeout(revoker, arbitrary_revoke_timeout);\n\t\t}\n\t\t, dispatch = function(filesaver, event_types, event) {\n\t\t\tevent_types = [].concat(event_types);\n\t\t\tvar i = event_types.length;\n\t\t\twhile (i--) {\n\t\t\t\tvar listener = filesaver[\"on\" + event_types[i]];\n\t\t\t\tif (typeof listener === \"function\") {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tlistener.call(filesaver, event || filesaver);\n\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\tthrow_outside(ex);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t, auto_bom = function(blob) {\n\t\t\t// prepend BOM for UTF-8 XML and text/* types (including HTML)\n\t\t\t// note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF\n\t\t\tif (/^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(blob.type)) {\n\t\t\t\treturn new Blob([String.fromCharCode(0xFEFF), blob], {type: blob.type});\n\t\t\t}\n\t\t\treturn blob;\n\t\t}\n\t\t, FileSaver = function(blob, name, no_auto_bom) {\n\t\t\tif (!no_auto_bom) {\n\t\t\t\tblob = auto_bom(blob);\n\t\t\t}\n\t\t\t// First try a.download, then web filesystem, then object URLs\n\t\t\tvar\n\t\t\t\t  filesaver = this\n\t\t\t\t, type = blob.type\n\t\t\t\t, force = type === force_saveable_type\n\t\t\t\t, object_url\n\t\t\t\t, dispatch_all = function() {\n\t\t\t\t\tdispatch(filesaver, \"writestart progress write writeend\".split(\" \"));\n\t\t\t\t}\n\t\t\t\t// on any filesys errors revert to saving with object URLs\n\t\t\t\t, fs_error = function() {\n\t\t\t\t\tif ((is_chrome_ios || (force && is_safari)) && view.FileReader) {\n\t\t\t\t\t\t// Safari doesn't allow downloading of blob urls\n\t\t\t\t\t\tvar reader = new FileReader();\n\t\t\t\t\t\treader.onloadend = function() {\n\t\t\t\t\t\t\tvar url = is_chrome_ios ? reader.result : reader.result.replace(/^data:[^;]*;/, 'data:attachment/file;');\n\t\t\t\t\t\t\tvar popup = view.open(url, '_blank');\n\t\t\t\t\t\t\tif(!popup) view.location.href = url;\n\t\t\t\t\t\t\turl=undefined; // release reference before dispatching\n\t\t\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t\t\t\tdispatch_all();\n\t\t\t\t\t\t};\n\t\t\t\t\t\treader.readAsDataURL(blob);\n\t\t\t\t\t\tfilesaver.readyState = filesaver.INIT;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t// don't create more object URLs than needed\n\t\t\t\t\tif (!object_url) {\n\t\t\t\t\t\tobject_url = get_URL().createObjectURL(blob);\n\t\t\t\t\t}\n\t\t\t\t\tif (force) {\n\t\t\t\t\t\tview.location.href = object_url;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar opened = view.open(object_url, \"_blank\");\n\t\t\t\t\t\tif (!opened) {\n\t\t\t\t\t\t\t// Apple does not allow window.open, see https://developer.apple.com/library/safari/documentation/Tools/Conceptual/SafariExtensionGuide/WorkingwithWindowsandTabs/WorkingwithWindowsandTabs.html\n\t\t\t\t\t\t\tview.location.href = object_url;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t\tdispatch_all();\n\t\t\t\t\trevoke(object_url);\n\t\t\t\t}\n\t\t\t;\n\t\t\tfilesaver.readyState = filesaver.INIT;\n\n\t\t\tif (can_use_save_link) {\n\t\t\t\tobject_url = get_URL().createObjectURL(blob);\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tsave_link.href = object_url;\n\t\t\t\t\tsave_link.download = name;\n\t\t\t\t\tclick(save_link);\n\t\t\t\t\tdispatch_all();\n\t\t\t\t\trevoke(object_url);\n\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfs_error();\n\t\t}\n\t\t, FS_proto = FileSaver.prototype\n\t\t, saveAs = function(blob, name, no_auto_bom) {\n\t\t\treturn new FileSaver(blob, name || blob.name || \"download\", no_auto_bom);\n\t\t}\n\t;\n\t// IE 10+ (native saveAs)\n\tif (typeof navigator !== \"undefined\" && navigator.msSaveOrOpenBlob) {\n\t\treturn function(blob, name, no_auto_bom) {\n\t\t\tname = name || blob.name || \"download\";\n\n\t\t\tif (!no_auto_bom) {\n\t\t\t\tblob = auto_bom(blob);\n\t\t\t}\n\t\t\treturn navigator.msSaveOrOpenBlob(blob, name);\n\t\t};\n\t}\n\n\tFS_proto.abort = function(){};\n\tFS_proto.readyState = FS_proto.INIT = 0;\n\tFS_proto.WRITING = 1;\n\tFS_proto.DONE = 2;\n\n\tFS_proto.error =\n\tFS_proto.onwritestart =\n\tFS_proto.onprogress =\n\tFS_proto.onwrite =\n\tFS_proto.onabort =\n\tFS_proto.onerror =\n\tFS_proto.onwriteend =\n\t\tnull;\n\n\treturn saveAs;\n}(\n\t   typeof self !== \"undefined\" && self\n\t|| typeof window !== \"undefined\" && window\n\t|| this.content\n));\n// `self` is undefined in Firefox for Android content script context\n// while `this` is nsIContentFrameMessageManager\n// with an attribute `content` that corresponds to the window\n\nif (typeof module !== \"undefined\" && module.exports) {\n  module.exports.saveAs = saveAs;\n} else if ((typeof define !== \"undefined\" && define !== null) && (define.amd !== null)) {\n  define(\"FileSaver.js\", function() {\n    return saveAs;\n  });\n}\n","import { csvFormat } from 'd3';\r\nimport { saveAs } from 'file-saver/FileSaver';\r\n\r\n/**\r\n * Export selected data to new csv and download\r\n *\r\n * @param {string} selection: one of {'brushed', 'marked', 'both'}\r\n * @param {string} filename:  name of csv file to be downloaded\r\n * @param {boolean} exportAll:  override selection param and export all data\r\n */\r\nconst exportData = (config, ps, flags) =>\r\n  function({ selection = 'both', filename = null, exportAll = false }) {\r\n    if (filename === null) {\r\n      filename = 'parasol_data.csv';\r\n    }\r\n\r\n    // identify data\r\n    let d = [];\r\n    if (exportAll) {\r\n      d = config.data;\r\n    } else if (selection == 'brushed') {\r\n      d = config.brushed;\r\n    } else if (selection == 'marked') {\r\n      d = config.marked;\r\n    } else if (selection == 'both') {\r\n      d = config.selections();\r\n    } else {\r\n      throw \"Please specify one of {'brushed', 'marked', 'both'}\";\r\n    }\r\n\r\n    if (d.length > 0) {\r\n      // format data as csv\r\n      // NOTE: include assigned data id number?\r\n      const csv = csvFormat(d, config.vars);\r\n\r\n      // create url and download\r\n      const file = new Blob([csv], { type: 'text/csv' });\r\n      saveAs(file, filename);\r\n    } else {\r\n      throw 'Error: No data selected.';\r\n    }\r\n    return this;\r\n  };\r\n\r\nexport default exportData;\r\n","/**\r\n * Selections are the collection of all brushed and marked data; reset all or just a subset (brushed or marked)\r\n *\r\n * @param {string} selection: One of {'brushed', 'marked', 'both'} keywords as string\r\n *\r\n * NOTE: if linked charts exist, only those are affected\r\n */\r\nconst resetSelections = (config, ps, flags) => selection => {\r\n  if (selection == 'brushed') {\r\n    ps.brushReset();\r\n  } else if (selection == 'marked') {\r\n    ps.unmark();\r\n  } else if (selection == 'both') {\r\n    ps.brushReset();\r\n    ps.unmark();\r\n  } else {\r\n    throw \"Please specify one of {'brushed', 'marked', 'both'}\";\r\n  }\r\n};\r\n\r\nexport default resetSelections;\r\n","// parcoords wrapper: set foreground alpha on all charts\r\nconst alpha = (config, ps, flags) =>\r\n  function(d) {\r\n    ps.charts.forEach(pc => pc.alpha(d));\r\n    return this;\r\n  };\r\nexport default alpha;\r\n","// parcoords wrapper: set polyline hex color on all charts\r\nconst color = (config, ps, flags) =>\r\n  function(d) {\r\n    ps.charts.forEach(pc => pc.color(d));\r\n    return this;\r\n  };\r\nexport default color;\r\n","// parcoords wrapper: set foreground alpha when brushes exist\r\nconst alphaOnBrushed = (config, ps, flags) =>\r\n  function(d) {\r\n    ps.charts.forEach(pc => pc.alphaOnBrushed(d));\r\n    return this;\r\n  };\r\nexport default alphaOnBrushed;\r\n","// parcoords wrapper: set hex color of polylines within brush extents\r\nconst brushedColor = (config, ps, flags) =>\r\n  function(d) {\r\n    ps.charts.forEach(pc => pc.brushedColor(d));\r\n    return this;\r\n  };\r\nexport default brushedColor;\r\n","// parcoords wrapper: enable reordering on all charts\r\n\r\n// const reorderable = (config, ps, flags) =>\r\n//   function({ chartIDs=[...Array(ps.charts.length).keys()] }={}) {\r\n//     ps.charts.forEach( (pc, i) => {\r\n//       if (chartIDs.includes(i)) {\r\n//         pc\r\n//           .reorderable()\r\n//           .hideAxis(config.partition[i])\r\n//           .render()\r\n//           .updateAxes(0);\r\n//       }\r\n//     });\r\n//     return this;\r\n//   }\r\n// export default reorderable;\r\n\r\nconst reorderable = (config, ps, flags) =>\r\n  function() {\r\n    ps.charts.forEach(pc => pc.reorderable());\r\n    return this;\r\n  };\r\nexport default reorderable;\r\n","// parcoords wrapper: set composite mode on all charts\r\nconst composite = (config, ps, flags) =>\r\n  function(d) {\r\n    ps.charts.forEach(pc => pc.composite(d));\r\n    return this;\r\n  };\r\nexport default composite;\r\n","// parcoords wrapper: enable shadows on all charts\r\nconst shadows = (config, ps, flags) =>\r\n  function(d) {\r\n    ps.charts.forEach(pc => pc.shadows(d));\r\n    return this;\r\n  };\r\nexport default shadows;\r\n","// parcoords wrapper: format dimensions (applies to all charts)\r\nconst dimensions = (config, ps, flags) =>\r\n  function(d) {\r\n    ps.charts.forEach(pc => pc.dimensions(d));\r\n    return this;\r\n  };\r\nexport default dimensions;\r\n","// parcoords wrapper: flip listed axes on all charts\r\nconst flipAxes = (config, ps, flags) =>\r\n  function(axes) {\r\n    ps.charts.forEach(pc => pc.flipAxes(axes));\r\n    return this;\r\n  };\r\nexport default flipAxes;\r\n","// parcoords wrapper: set the domain (and scale?) of a single axis on all charts\r\nconst scale = (config, ps, flags) =>\r\n  function(axis, domain) {\r\n    const range = ps.charts[0].dimensions()[axis].yscale.domain();\r\n    if (range[0] >= domain[0] && range[1] <= domain[1]) {\r\n      ps.charts.forEach(pc => pc.scale(axis, domain));\r\n    } else {\r\n      throw Error(\r\n        'Domain Error: specified domain must be exceed axis extrema.'\r\n      );\r\n    }\r\n    return this;\r\n  };\r\nexport default scale;\r\n","// parcoords wrapper: set bundle dimension on all charts\r\nconst bundleDimension = (config, ps, flags) =>\r\n  function(d) {\r\n    ps.charts.forEach(pc => pc.bundleDimension(d));\r\n    return this;\r\n  };\r\nexport default bundleDimension;\r\n","// parcoords wrapper: set bundling strength on all charts\r\nconst bundlingStrength = (config, ps, flags) =>\r\n  function(d) {\r\n    ps.charts.forEach(pc => pc.bundlingStrength(d));\r\n    return this;\r\n  };\r\nexport default bundlingStrength;\r\n","// parcoords wrapper: set bundling smoothness on all charts\r\nconst smoothness = (config, ps, flags) =>\r\n  function(d) {\r\n    ps.charts.forEach(pc => pc.smoothness(d));\r\n    return this;\r\n  };\r\nexport default smoothness;\r\n","// parcoords wrapper: render and update charts, maintain config\r\nconst render = (config, ps, flags) =>\r\n  function() {\r\n    ps.charts.forEach((pc, i) => {\r\n      pc.hideAxis(config.partition[i])\r\n        .render()\r\n        .updateAxes(0);\r\n    });\r\n    return this;\r\n  };\r\nexport default render;\r\n","// parcoords wrapper: reset all brushes and preform necessary updates\r\nconst brushReset = (config, ps, flags) => () => {\r\n  ps.charts.forEach(pc => pc.brushReset());\r\n\r\n  // NOTE: if charts are linked and at least one is not reset, then none will be reset\r\n\r\n  // NOTE: brushed data in config is updated by sync() as consequence of pc.brushReset()\r\n  // currently need to force due to issue with ParCoords.selected() returning entire dataset if brush extents are empty\r\n  config.brushed = [];\r\n\r\n  if (flags.grid) {\r\n    ps.gridUpdate();\r\n  }\r\n};\r\n\r\nexport default brushReset;\r\n","// parcoords wrapper: reset all marks and preform necessary updates\r\nconst unmark = (config, ps, flags) => () => {\r\n  ps.charts.forEach(pc => pc.unmark());\r\n  config.marked = [];\r\n  if (flags.grid) {\r\n    config.grid.setSelectedRows([]);\r\n    ps.gridUpdate();\r\n  }\r\n};\r\n\r\nexport default unmark;\r\n","// parcoords wrapper: reset all highlights\r\nconst unhighlight = (config, ps, flags) => () => {\r\n  ps.charts.forEach(pc => pc.unhighlight());\r\n};\r\nexport default unhighlight;\r\n","import { union } from 'lodash-es';\r\n\r\nconst DefaultConfig = {\r\n  dataView: false,\r\n  grid: false,\r\n  chartOptions: {}, // parcoords options, applies to all charts\r\n  brushed: [], // intersection of all brushed data in linked charts\r\n  marked: [], // union of all marked data in linked charts\r\n  selections: function() {\r\n    return union(this.brushed, this.marked);\r\n  },\r\n};\r\n\r\nexport default DefaultConfig;\r\n","import { entries, keys, dispatch } from 'd3';\r\n\r\nimport DefaultConfig from './defaultConfig';\r\nimport format_data from '../util/format_data';\r\n\r\nconst initState = (data, userConfig) => {\r\n  const config = Object.assign({}, DefaultConfig, userConfig);\r\n  // force attributes for consistent operation\r\n  config.data = data;\r\n  config.vars = Object.keys(data[0]); // does not contain 'id'\r\n  config.partition = {}; // { chart id: [hidden vars]} built in init.js\r\n\r\n  // assign each data element an ID for slickgrid and other analyses\r\n  config.data.forEach((d, i) => {\r\n    d.id = d.id || i;\r\n  });\r\n  config.data = format_data(config.data);\r\n\r\n  // NOTE: \"id\" col hidden globally by default in init.js\r\n\r\n  const eventTypes = [\r\n    // 'data', // when data in a chart is updated, how should this cascade to linked?\r\n    // 'render',\r\n    // 'resize',\r\n    // 'highlight',\r\n    // 'mark',\r\n    'brush',\r\n    'brushend',\r\n    'brushstart',\r\n    // 'axesreorder',\r\n  ].concat(keys(config));\r\n\r\n  const events = dispatch.apply(this, eventTypes),\r\n    flags = {\r\n      linked: false,\r\n      grid: false,\r\n      // axes: false,\r\n      // interactive: false,\r\n      // debug: false,\r\n    };\r\n  // xscale = scalePoint(),\r\n  // dragging = {},\r\n  // axis = axisLeft().ticks(5),\r\n  // ctx = {},\r\n  // canvas = {};\r\n\r\n  return {\r\n    config,\r\n    events,\r\n    eventTypes,\r\n    flags,\r\n  };\r\n};\r\n\r\nexport default initState;\r\n","//css\r\nimport './parallel-coordinates.css';\r\n\r\n//misc\r\n\r\n//api\r\nimport init from './api/init';\r\nimport attachGrid from './api/attachGrid';\r\nimport gridUpdate from './api/gridUpdate';\r\nimport linked from './api/linked';\r\nimport cluster from './api/cluster';\r\nimport weightedSums from './api/weightedSums';\r\nimport hideAxes from './api/hideAxes';\r\nimport showAxes from './api/showAxes';\r\nimport setAxesLayout from './api/setAxesLayout';\r\nimport keepData from './api/keepData';\r\nimport removeData from './api/removeData';\r\nimport exportData from './api/exportData';\r\nimport resetSelections from './api/resetSelections';\r\n\r\n// parcoords wrappers\r\nimport alpha from './wrap/alpha';\r\nimport color from './wrap/color';\r\nimport alphaOnBrushed from './wrap/alphaOnBrushed';\r\nimport brushedColor from './wrap/brushedColor';\r\nimport reorderable from './wrap/reorderable';\r\nimport composite from './wrap/composite';\r\nimport shadows from './wrap/shadows';\r\n// import mark from './wrap/mark';\r\n// import highlight from './wrap/highlight';\r\nimport dimensions from './wrap/dimensions';\r\nimport flipAxes from './wrap/flipAxes';\r\nimport scale from './wrap/scale';\r\nimport bundleDimension from './wrap/bundleDimension';\r\nimport bundlingStrength from './wrap/bundlingStrength';\r\nimport smoothness from './wrap/smoothness';\r\nimport render from './wrap/render';\r\nimport brushReset from './wrap/brushReset';\r\nimport unmark from './wrap/unmark';\r\nimport unhighlight from './wrap/unhighlight';\r\n\r\nimport initState from './state/initState';\r\n// import bindEvents from './bindEvents';\r\nimport { version } from '../package.json';\r\n\r\nconst Parasol = (data, userConfig) => {\r\n  const state = initState(data, userConfig);\r\n  const { config, events, flags } = state;\r\n\r\n  const ps = init(config);\r\n\r\n  // bindEvents();\r\n\r\n  // expose the state of charts and grid\r\n  ps.state = config;\r\n  ps.flags = flags;\r\n  ps.version = version;\r\n  ps.grid = config.grid;\r\n  ps.dataview = config.dataview;\r\n\r\n  ps.attachGrid = attachGrid(config, ps, flags);\r\n  ps.gridUpdate = gridUpdate(config, ps, flags);\r\n  ps.linked = linked(config, ps, flags);\r\n  ps.cluster = cluster(config, ps, flags);\r\n  ps.weightedSums = weightedSums(config, ps, flags);\r\n  ps.hideAxes = hideAxes(config, ps, flags);\r\n  ps.showAxes = showAxes(config, ps, flags);\r\n  ps.setAxesLayout = setAxesLayout(config, ps, flags);\r\n  ps.keepData = keepData(config, ps, flags);\r\n  ps.removeData = removeData(config, ps, flags);\r\n  ps.exportData = exportData(config, ps, flags);\r\n  ps.resetSelections = resetSelections(config, ps, flags);\r\n\r\n  // parcoords methods (global)\r\n  ps.alpha = alpha(config, ps, flags);\r\n  ps.color = color(config, ps, flags);\r\n  ps.alphaOnBrushed = alphaOnBrushed(config, ps, flags);\r\n  ps.brushedColor = brushedColor(config, ps, flags);\r\n  ps.reorderable = reorderable(config, ps, flags);\r\n  ps.composite = composite(config, ps, flags);\r\n  ps.shadows = shadows(config, ps, flags);\r\n  // ps.mark = mark(config, ps, flags);\r\n  // ps.highlight = highlight(config, ps, flags);\r\n  ps.dimensions = dimensions(config, ps, flags);\r\n  ps.scale = scale(config, ps, flags);\r\n  ps.flipAxes = flipAxes(config, ps, flags);\r\n  ps.bundleDimension = bundleDimension(config, ps, flags);\r\n  ps.bundlingStrength = bundlingStrength(config, ps, flags);\r\n  ps.smoothness = smoothness(config, ps, flags);\r\n  ps.render = render(config, ps, flags);\r\n  ps.brushReset = brushReset(config, ps, flags);\r\n  ps.unmark = unmark(config, ps, flags);\r\n  ps.unhighlight = unhighlight(config, ps, flags);\r\n\r\n  return ps;\r\n};\r\n\r\nexport default Parasol;\r\n"],"names":["init","ps","selection","selectAll","charts","each","d","i","ParCoords","config","chartOptions","data","hideAxis","alpha","render","mode","brushMode","partition","as_float","converted","parseFloat","x","isNaN","attachGrid","flags","container","columns","options","grid","checkboxSelector","SlickGrid","Plugins","CheckboxSelectColumn","cssClass","column_keys","vars","difference","unshift","map","key","id","name","field","sortable","getColumnDefinition","enableCellNavigation","enableColumnReorder","multiColumnSort","editable","asyncEditorLoading","autoEdit","dataView","Data","DataView","setItems","Grid","setSelectionModel","RowSelectionModel","selectActiveRow","registerPlugin","onRowCountChanged","subscribe","e","args","updateRowCount","onRowsChanged","invalidateRows","rows","syncGridSelection","sortcol","c","shift","sortdir","comparer","a","b","y","onSort","sortAsc","sortCol","sort","gridUpdate","setColumns","selections","length","marked","union","beginUpdate","endUpdate","sync","brush_extents","linked","forEach","push","pc","selected","brushReset","brushed","intersection","chartIDs","Array","keys","Number","j","on","onMouseEnter","getCellFromEvent","row","getItems","highlight","onMouseLeave","unhighlight","onSelectedRowsChanged","selected_row_ids","getSelectedRows","unmark","mark","array_to_object","reduce","acc","obj","Object","k","concat","object_to_array","df","result","entries","values","val","toString","arr","max","array","Math","apply","min","range","extents","sum","num","l","mean","variance","pow","standardDeviation","sqrt","zScores","norms","standardize","format_data","csvParse","csvFormat","add_column","col_name","names","col","includes","col_def","cluster","displayIDs","palette","schemeCategory10","std","hidden","isArray","scheme","scaleOrdinal","cluster_vars","v","target","value","kmeans","clusters","createAxes","color","updateAxes","cols","getColumns","normalize","weightedSums","weights","norm","row_totals","d_weight","score","console","log","hideAxes","isPlainObject","chartID","showAxes","setAxesLayout","layout","keepData","resetSelections","default","removeData","saveAs","view","navigator","test","userAgent","doc","document","get_URL","URL","webkitURL","save_link","createElementNS","can_use_save_link","click","node","event","MouseEvent","dispatchEvent","is_safari","HTMLElement","safari","is_chrome_ios","throw_outside","ex","setImmediate","setTimeout","force_saveable_type","arbitrary_revoke_timeout","revoke","file","revoker","revokeObjectURL","remove","dispatch","filesaver","event_types","listener","call","auto_bom","blob","type","Blob","String","fromCharCode","FileSaver","no_auto_bom","force","object_url","dispatch_all","split","fs_error","FileReader","reader","onloadend","url","replace","popup","open","location","href","undefined","readyState","DONE","readAsDataURL","INIT","createObjectURL","opened","download","FS_proto","prototype","msSaveOrOpenBlob","abort","WRITING","error","onwritestart","onprogress","onwrite","onabort","onerror","onwriteend","self","window","this","content","module","exports","exportData","filename","exportAll","csv","alphaOnBrushed","brushedColor","reorderable","composite","shadows","dimensions","flipAxes","axes","scale","axis","domain","yscale","Error","bundleDimension","bundlingStrength","smoothness","setSelectedRows","DefaultConfig","initState","userConfig","assign","eventTypes","events","Parasol","state","version","dataview"],"mappings":"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"}